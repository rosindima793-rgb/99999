# üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –∏ —á—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å

## ‚úÖ –£–ñ–ï –°–î–ï–õ–ê–ù–û (–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### üîê Security Fixes
1. **API –∫–ª—é—á–∏ –∑–∞—â–∏—â–µ–Ω—ã**
   - ‚úÖ –£–¥–∞–ª–µ–Ω—ã –∏–∑ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `.env.production` –≤ `.gitignore`
   - ‚úÖ `.env.example` –æ—á–∏—â–µ–Ω

2. **Content Security Policy**
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–ª–Ω—ã–π CSP –≤ `next.config.mjs`
   - ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç XSS, clickjacking, injection

3. **–£—Ç–∏–ª–∏—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
   - ‚úÖ –°–æ–∑–¥–∞–Ω `utils/securityUtils.ts`:
     - `safeBigInt()` - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
     - `isValidAddress()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥—Ä–µ—Å–æ–≤
     - `isValidTokenId()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è NFT ID
     - `isCorrectChain()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–∏
     - `safeRPCCall()` - RPC —Å timeout
     - Rate limiter (100 calls/min)

4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
   - ‚úÖ `SECURITY_AUDIT_SUMMARY.md` - –ø–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç
   - ‚úÖ `SECURITY_FIXES_APPLIED.md` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
   - ‚úÖ `SECURITY_UTILS_GUIDE.md` - –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - ‚úÖ `DEPLOYMENT_CHECKLIST.md` - —á–µ–∫–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è
   - ‚úÖ –≠—Ç–æ—Ç —Ñ–∞–π–ª - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

---

## ‚è≥ –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ –í–†–£–ß–ù–£–Æ (2-3 —á–∞—Å–∞)

### 1Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (15 –º–∏–Ω—É—Ç)

```powershell
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä
cp .env.example .env.local

# –û—Ç–∫—Ä—ã—Ç—å –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å
notepad .env.local
```

**–ß—Ç–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:**
```bash
ALCHEMY_API_KEY=–≤–∞—à_–Ω–∞—Å—Ç–æ—è—â–∏–π_–∫–ª—é—á_—Å_alchemy_dashboard
NEXT_PUBLIC_ALCHEMY_API_KEY_1=–∫–ª—é—á_1
NEXT_PUBLIC_ALCHEMY_API_KEY_2=–∫–ª—é—á_2
NEXT_PUBLIC_ALCHEMY_API_KEY_3=–∫–ª—é—á_3
```

üìå **–ì–¥–µ –≤–∑—è—Ç—å –∫–ª—é—á–∏:** https://dashboard.alchemy.com/

---

### 2Ô∏è‚É£ –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ (1-2 —á–∞—Å–∞)

#### A. –ó–∞–º–µ–Ω–∏—Ç—å `BigInt()` –Ω–∞ `safeBigInt()` ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û

**–ù–∞–π—Ç–∏ –≤—Å–µ –º–µ—Å—Ç–∞:**
```powershell
Select-String -Pattern "BigInt\(" -Path .\app\**\*.tsx,.\components\**\*.tsx
```

**–ó–∞–º–µ–Ω–∏—Ç—å:**
```typescript
// ‚ùå –ë–´–õ–û
const tokenId = BigInt(userInput);

// ‚úÖ –°–¢–ê–õ–û
import { safeBigInt } from '@/utils/securityUtils';

const tokenId = safeBigInt(userInput);
if (!tokenId) {
  toast.error('Invalid Token ID');
  return;
}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):**
- [ ] `app/breed/page.tsx`
- [ ] `app/burn/page.tsx`
- [ ] `components/ClaimRewardsForm.tsx`
- [ ] `components/BreedCard.tsx`
- [ ] `components/BurnCard.tsx`

#### B. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É Chain ID ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û

**–í –∫–∞–∂–¥–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏:**
```typescript
import { useChainId } from 'wagmi';
import { isCorrectChain } from '@/utils/securityUtils';

const MONAD_TESTNET_ID = 10143;

const handleTransaction = async () => {
  // ‚úÖ –î–û–ë–ê–í–ò–¢–¨ –≠–¢–û
  const chainId = useChainId();
  if (!isCorrectChain(chainId, MONAD_TESTNET_ID)) {
    toast.error('Please switch to Monad Testnet');
    return;
  }
  
  // –î–∞–ª—å—à–µ –≤–∞—à–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è
  await writeContract({ ... });
};
```

**–§–∞–π–ª—ã:**
- [ ] `app/breed/page.tsx` - breeding
- [ ] `app/burn/page.tsx` - burning
- [ ] `components/ClaimRewardsForm.tsx` - claiming

#### C. –û–±–µ—Ä–Ω—É—Ç—å RPC –≤—ã–∑–æ–≤—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```typescript
import { safeRPCCall } from '@/utils/securityUtils';

// ‚úÖ –û–±–µ—Ä–Ω—É—Ç—å –≤—Å–µ publicClient.readContract()
const data = await safeRPCCall(
  () => publicClient.readContract({ ... }),
  30000
);
```

---

### 3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç (30 –º–∏–Ω—É—Ç)

```powershell
# Build test
npm run build

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: ‚úì Compiled successfully
```

```powershell
# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ
npm start
```

**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- [ ] Wallet Connect —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] NFT —Å–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- [ ] Breeding —Ä–∞–±–æ—Ç–∞–µ—Ç (—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π chain ID)
- [ ] Burn —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Claim rewards —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ Console

---

### 4Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Netlify (15 –º–∏–Ω—É—Ç)

1. **–û—Ç–∫—Ä—ã—Ç—å:** https://app.netlify.com
2. **–í—ã–±—Ä–∞—Ç—å —Å–∞–π—Ç** ‚Üí Site settings ‚Üí Environment variables
3. **–î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env.local`:**

```
ALCHEMY_API_KEY = [–≤–∞—à –∫–ª—é—á]
NEXT_PUBLIC_ALCHEMY_API_KEY_1 = [–∫–ª—é—á 1]
NEXT_PUBLIC_ALCHEMY_API_KEY_2 = [–∫–ª—é—á 2]
NEXT_PUBLIC_ALCHEMY_API_KEY_3 = [–∫–ª—é—á 3]
NEXT_PUBLIC_MONAD_CHAIN_ID = 10143
NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID = [–≤–∞—à project id]
```

4. **Build settings:**
   - Build command: `npm run build`
   - Publish directory: `.next`

---

### 5Ô∏è‚É£ Deploy! (5 –º–∏–Ω—É—Ç)

```powershell
# Commit –≤—Å—ë
git add .
git commit -m "security: apply security fixes before production"

# Push
git push origin main
```

Netlify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç! üöÄ

---

## üìä –ü–û–°–õ–ï –î–ï–ü–õ–û–Ø

### –°—Ä–∞–∑—É –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. **Security Headers**
   - –û—Ç–∫—Ä—ã—Ç—å DevTools ‚Üí Network ‚Üí –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å Response Headers
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å `Content-Security-Policy`

2. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**
   - Connect wallet
   - View NFTs
   - Breed (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—Ä–æ—Å–∏—Ç –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Å–µ—Ç—å –µ—Å–ª–∏ –Ω–µ Monad)
   - Burn
   - Claim

3. **Console**
   - –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
   - CSP violations = OK –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö 3rd party

---

## üÜò –ï–°–õ–ò –ß–¢–û-–¢–û –°–õ–û–ú–ê–õ–û–°–¨

### Immediate Rollback
–í Netlify Dashboard:
```
Deploys ‚Üí [Previous working deploy] ‚Üí Publish deploy
```

### Check Logs
```
Netlify Dashboard ‚Üí Functions ‚Üí View logs
```

---

## üìö –ü–û–õ–ï–ó–ù–´–ï –°–°–´–õ–ö–ò

| –î–æ–∫—É–º–µ–Ω—Ç | –î–ª—è —á–µ–≥–æ |
|----------|----------|
| `SECURITY_UTILS_GUIDE.md` | –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É—Ç–∏–ª–∏—Ç |
| `SECURITY_FIXES_APPLIED.md` | –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è |
| `DEPLOYMENT_CHECKLIST.md` | –ü–æ–ª–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç |

---

## ‚è±Ô∏è –í–†–ï–ú–ï–ù–ù–´–ï –ó–ê–¢–†–ê–¢–´

| –ó–∞–¥–∞—á–∞ | –í—Ä–µ–º—è |
|--------|-------|
| –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env | 15 –º–∏–Ω |
| –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ | 1-2 —á–∞—Å–∞ |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 30 –º–∏–Ω |
| –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Netlify | 15 –º–∏–Ω |
| Deploy | 5 –º–∏–Ω |
| **–ò–¢–û–ì–û** | **2-3 —á–∞—Å–∞** |

---

## ‚úÖ QUICK CHECKLIST

### Before Code Changes
- [ ] –ü—Ä–æ—á–∏—Ç–∞–ª `SECURITY_UTILS_GUIDE.md`
- [ ] –°–æ–∑–¥–∞–ª `.env.local` —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏

### Code Updates
- [ ] –ó–∞–º–µ–Ω–∏–ª –≤—Å–µ `BigInt()` –Ω–∞ `safeBigInt()`
- [ ] –î–æ–±–∞–≤–∏–ª chain ID –ø—Ä–æ–≤–µ—Ä–∫—É –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- [ ] (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –û–±–µ—Ä–Ω—É–ª RPC –≤—ã–∑–æ–≤—ã

### Testing
- [ ] `npm run build` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] `npm start` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ

### Netlify
- [ ] –î–æ–±–∞–≤–∏–ª environment variables
- [ ] –ù–∞—Å—Ç—Ä–æ–∏–ª build settings
- [ ] Pushed to main

### Post-Deploy
- [ ] Site –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] Security headers –µ—Å—Ç—å
- [ ] –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

---

**üéØ –°—Ç–∞—Ç—É—Å:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ security fixes –ø—Ä–∏–º–µ–Ω–µ–Ω—ã ‚úÖ  
**üìù –û—Å—Ç–∞–ª–æ—Å—å:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä—É—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ (2-3 —á–∞—Å–∞)  
**üöÄ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é –ø–æ—Å–ª–µ:** Completion of manual tasks

---

**–í–æ–ø—Ä–æ—Å—ã?** –°–º–æ—Ç—Ä–∏ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –≥–∞–π–¥—ã –≤ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö `.md` —Ñ–∞–π–ª–∞—Ö!
