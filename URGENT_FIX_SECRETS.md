# üö® –°–†–û–ß–ù–û: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Ç–µ—á–∫–∏ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ Netlify

> **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ 2025-10-03:** –ü—Ä–æ–µ–∫—Ç –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç NextAuth, –ø–æ—ç—Ç–æ–º—É —à–∞–≥–∏ —Å `NEXTAUTH_*` –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

**–î–∞—Ç–∞:** 3 –æ–∫—Ç—è–±—Ä—è 2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** Netlify –æ–±–Ω–∞—Ä—É–∂–∏–ª —Å–µ–∫—Ä–µ—Ç—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ build output

---

## ‚ùå –ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å

Netlify –Ω–∞—à—ë–ª **—Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è** API –∫–ª—é—á–µ–π –≤ —Ñ–∞–π–ª–∞—Ö:
- `netlify-env-import.txt` ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï –∫–ª—é—á–∏ (Alchemy, WalletConnect, NEXTAUTH_SECRET)
- `FIX_NOW.txt` ‚Äî Alchemy API keys
- `SECURITY_AUDIT_2025.md` ‚Äî NEXTAUTH_SECRET
- `netlify.toml` ‚Äî NEXTAUTH_URL –∏ placeholder

**–ü–æ—á–µ–º—É —ç—Ç–æ –æ–ø–∞—Å–Ω–æ:**
- –ï—Å–ª–∏ —ç—Ç–∏ —Ñ–∞–π–ª—ã –ø–æ–ø–∞–¥—É—Ç –≤ git ‚Üí –∫–ª—é—á–∏ –±—É–¥—É—Ç –≤ –∏—Å—Ç–æ—Ä–∏–∏ –Ω–∞–≤—Å–µ–≥–¥–∞
- –õ—é–±–æ–π —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ä–µ–ø–æ –º–æ–∂–µ—Ç —É–∫—Ä–∞—Å—Ç—å –≤–∞—à–∏ Alchemy –ª–∏–º–∏—Ç—ã
- NEXTAUTH_SECRET —É—Ç–µ—á—ë—Ç ‚Üí —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –º–æ–∂–Ω–æ –ø–æ–¥–¥–µ–ª–∞—Ç—å

---

## ‚úÖ –ß—Ç–æ –Ø –£–ñ–ï –°–î–ï–õ–ê–õ

1. ‚úÖ –î–æ–±–∞–≤–∏–ª —Ñ–∞–π–ª—ã —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –≤ `.gitignore`:
   - `netlify-env-import.txt`
   - `FIX_NOW.txt`
   - `SECURITY_AUDIT_2025.md`
   - `*secret*.txt`, `*keys*.txt`

2. ‚úÖ –£–¥–∞–ª–∏–ª —Å–µ–∫—Ä–µ—Ç—ã –∏–∑ `netlify.toml` ‚Äî —Ç–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

3. ‚úÖ –ó–∞–º–µ–Ω–∏–ª NEXTAUTH_SECRET –≤ `SECURITY_AUDIT_2025.md` –Ω–∞ placeholder

---

## üî• –ß—Ç–æ –í–ê–ú –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ –ü–†–Ø–ú–û –°–ï–ô–ß–ê–° (5 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª—ã —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –ù–ï –≤ git

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```powershell
git status
```

**–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —ç—Ç–∏ —Ñ–∞–π–ª—ã –ø–æ–∫–∞–∑–∞–Ω—ã –∫–∞–∫ "??" (untracked):**
- `netlify-env-import.txt`
- `FIX_NOW.txt`
- `SECURITY_AUDIT_2025.md`

**–ï—Å–ª–∏ –æ–Ω–∏ –ù–ï –ø–æ–∫–∞–∑–∞–Ω—ã** = –≤—Å—ë –û–ö (gitignore —Ä–∞–±–æ—Ç–∞–µ—Ç).

**–ï—Å–ª–∏ –ø–æ–∫–∞–∑–∞–Ω—ã —Å "M" –∏–ª–∏ "A"** = –ü–õ–û–•–û ‚Üí –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```powershell
git reset HEAD netlify-env-import.txt FIX_NOW.txt SECURITY_AUDIT_2025.md
git restore netlify-env-import.txt FIX_NOW.txt SECURITY_AUDIT_2025.md
```

---

### –®–∞–≥ 2: –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –ù–û–í–´–ô NEXTAUTH_SECRET

–°—Ç–∞—Ä—ã–π —Å–µ–∫—Ä–µ—Ç **–°–ö–û–ú–ü–†–û–ú–ï–¢–ò–†–û–í–ê–ù** (–Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ SECURITY_AUDIT_2025.md).

**–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π:**

```powershell
powershell -Command "[Convert]::ToBase64String((1..48 | ForEach-Object { Get-Random -Maximum 256 }))"
```

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `Abc123Def456...`) –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ.

---

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ Netlify UI

1. –û—Ç–∫—Ä–æ–π—Ç–µ Netlify: https://app.netlify.com/sites/aaakta/settings/deploys#environment
2. –ù–∞–π–¥–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é **NEXTAUTH_SECRET**
3. –ù–∞–∂–º–∏—Ç–µ **Edit** –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –ù–û–í–´–ô —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ–∫—Ä–µ—Ç
4. –ù–∞–∂–º–∏—Ç–µ **Save**

---

### –®–∞–≥ 4: –í–ê–ñ–ù–û ‚Äî –ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ —Ñ–∞–π–ª—ã —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏!

**–ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —ç—Ç–∏ —Ñ–∞–π–ª—ã:**
- `netlify-env-import.txt` ‚Äî —É–¥–∞–ª–∏—Ç–µ –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- `FIX_NOW.txt` ‚Äî —É–¥–∞–ª–∏—Ç–µ
- `SECURITY_AUDIT_2025.md` ‚Äî —Ö—Ä–∞–Ω–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ, –ù–ï –ø—É—à—å—Ç–µ –≤ git
- `.env`, `.env.local` ‚Äî —É–∂–µ –≤ gitignore

**–ö–∞–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:**
1. –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω–∏—Ç–µ –¢–û–õ–¨–ö–û –≤ Netlify UI Environment Variables
2. –õ–æ–∫–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env.local` (–æ–Ω –≤ gitignore)
3. –í –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ placeholders: `NEXTAUTH_SECRET=your-secret-here`

---

### –®–∞–≥ 5: –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–Ø —É–∂–µ –æ–±–Ω–æ–≤–∏–ª `.gitignore` –∏ `netlify.toml`. –¢–µ–ø–µ—Ä—å –∑–∞–∫–æ–º–º–∏—Ç—å—Ç–µ:

```powershell
git add .gitignore netlify.toml
git commit -m "security: remove secrets from netlify.toml and add gitignore rules"
git push origin netlify-deploy-automation
```

---

### –®–∞–≥ 6: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–æ–≤—ã–π deploy

1. –û—Ç–∫—Ä–æ–π—Ç–µ Netlify Deploys
2. –ù–∞–∂–º–∏—Ç–µ **Trigger deploy** ‚Üí **Clear cache and deploy site**
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ ‚Äî **–Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å** –æ—à–∏–±–æ–∫ "Exposed secrets detected"

---

## üìã –ü—Ä–æ NEXT_PUBLIC_* –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

**Netlify –∂–∞–ª—É–µ—Ç—Å—è –Ω–∞:**
- `NEXT_PUBLIC_ALCHEMY_API_KEY_1/2/3`
- `NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID`
- `NEXT_PUBLIC_MONAD_CHAIN_ID`

**–≠—Ç–æ –ù–ï —Å–µ–∫—Ä–µ—Ç—ã –≤ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–º —Å–º—ã—Å–ª–µ:**
- –û–Ω–∏ **–¥–æ–ª–∂–Ω—ã** –±—ã—Ç—å –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º bundle (–±—Ä–∞—É–∑–µ—Ä)
- `NEXT_PUBLIC_` = –ø—É–±–ª–∏—á–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- **–ù–û** Alchemy keys –≤—Å—ë —Ä–∞–≤–Ω–æ –ª—É—á—à–µ —Å–∫—Ä—ã—Ç—å (—Å–º. Security Audit)

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. **NEXT_PUBLIC_MONAD_CHAIN_ID** ‚Äî –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å (chain ID –ø—É–±–ª–∏—á–Ω—ã–π)
2. **NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID** ‚Äî –æ—Å—Ç–∞–≤–∏—Ç—å (–ø—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç ID)
3. **NEXT_PUBLIC_ALCHEMY_API_KEY_*** ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä (—Å–º. Security Audit H-1)

**–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ñ–∏–∫—Å–∞ (–µ—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ API route):**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω—ã–µ RPC (testnet –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π):
  ```env
  MONAD_RPC=https://testnet-rpc.monad.xyz
  ```
- –£–¥–∞–ª–∏—Ç–µ `NEXT_PUBLIC_ALCHEMY_API_KEY_*` –∏–∑ Netlify env vars

---

## ‚ö†Ô∏è –ï—Å–ª–∏ —Ä–µ–ø–æ –ø—É–±–ª–∏—á–Ω—ã–π –Ω–∞ GitHub

**–ö–†–ò–¢–ò–ß–ù–û:** –ï—Å–ª–∏ –≤–∞—à —Ä–µ–ø–æ –ø—É–±–ª–∏—á–Ω—ã–π –ò –≤—ã —É–∂–µ –ø—É—à–∏–ª–∏ —ç—Ç–∏ —Ñ–∞–π–ª—ã ‚Üí —Å–µ–∫—Ä–µ—Ç—ã –≤ –∏—Å—Ç–æ—Ä–∏–∏ git.

**–†–µ—à–µ–Ω–∏–µ:**
1. –°–º–µ–Ω–∏—Ç–µ –í–°–ï –∫–ª—é—á–∏:
   - –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π NEXTAUTH_SECRET ‚úÖ (—É–∂–µ —Å–¥–µ–ª–∞–ª–∏)
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–µ Alchemy API keys –Ω–∞ https://dashboard.alchemy.com
   - –û–±–Ω–æ–≤–∏—Ç–µ NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

2. –ü–æ—á–∏—Å—Ç–∏—Ç–µ git –∏—Å—Ç–æ—Ä–∏—é (advanced):
   ```powershell
   # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ BFG Repo-Cleaner
   # https://rtyley.github.io/bfg-repo-cleaner/
   
   # –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª replacements.txt:
   # cj0mWZ2tyzzr5e+F6NN5OlrTl8GQnCMKDxP5G0LXre9R74lL3L2T6ymzF3yNmIdj==>***REMOVED***
   # XgKXPDCwM8SYsWDPk1yCs==>***REMOVED***
   # 2IQm_LTSDvuAdUJ9rBrgd==>***REMOVED***
   # HV4pb99WrMhI_L2dI7wg0==>***REMOVED***
   
   bfg --replace-text replacements.txt
   git reflog expire --expire=now --all && git gc --prune=now --aggressive
   git push --force
   ```

---

## ‚úÖ Checklist —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü–æ—Å–ª–µ –≤—Å–µ—Ö —à–∞–≥–æ–≤ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [ ] `git status` ‚Äî —Ñ–∞–π–ª—ã —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –ù–ï tracked
- [ ] Netlify env vars –æ–±–Ω–æ–≤–ª–µ–Ω—ã (–Ω–æ–≤—ã–π NEXTAUTH_SECRET)
- [ ] `netlify.toml` –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤
- [ ] –ù–æ–≤—ã–π deploy –ø—Ä–æ—à—ë–ª –ë–ï–ó "Exposed secrets detected"
- [ ] –°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç (NextAuth —Å–µ—Å—Å–∏–∏ –≤–∞–ª–∏–¥–Ω—ã —Å –Ω–æ–≤—ã–º —Å–µ–∫—Ä–µ—Ç–æ–º)

---

## üìû –ò—Ç–æ–≥–æ

**–ß—Ç–æ –ù–ï –ù–£–ñ–ù–û –¥–µ–ª–∞—Ç—å:**
- ‚ùå –ö–æ–º–º–∏—Ç–∏—Ç—å `netlify-env-import.txt`, `FIX_NOW.txt`
- ‚ùå –•—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ `netlify.toml` –∏–ª–∏ –ª—é–±—ã—Ö .md —Ñ–∞–π–ª–∞—Ö
- ‚ùå –ü—É—à–∏—Ç—å —Ñ–∞–π–ª—ã —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ API keys

**–ß—Ç–æ –ù–£–ñ–ù–û –¥–µ–ª–∞—Ç—å:**
- ‚úÖ –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã ‚Üí Netlify UI Environment Variables
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ ‚Üí `.env.local` (–≤ gitignore)
- ‚úÖ –í –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚Üí placeholders (`your-secret-here`)
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π (–æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —É—Ç–µ—á–∫–∞)

---

**–í—Ä–µ–º—è –Ω–∞ —Ñ–∏–∫—Å:** ~5 –º–∏–Ω—É—Ç  
**–°—Ç–∞—Ç—É—Å:** üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ (–Ω–æ –ª–µ–≥–∫–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å)
